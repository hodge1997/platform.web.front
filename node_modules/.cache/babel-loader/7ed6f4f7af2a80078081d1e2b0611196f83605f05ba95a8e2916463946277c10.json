{"ast":null,"code":"var _jsxFileName = \"/Users/sha/Desktop/CollectPie_frontend/collectpie_flask/src/components/LoginPage/LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useContext } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useLocation, useNavigate, Link } from 'react-router-dom';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './LoginPage.css';\nimport { AuthContext } from '../../contexts/AuthContext'; // Import AuthContext\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  var _location$state, _location$state2;\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    login\n  } = useContext(AuthContext); // Get login function from AuthContext\n\n  // Dynamically load the Google Platform script\n  useEffect(() => {\n    const loadGoogleScript = () => {\n      const script = document.createElement('script');\n      script.src = 'https://apis.google.com/js/platform.js';\n      script.async = true;\n      script.defer = true;\n      script.onload = initializeGoogleSignIn; // Initialize after script is loaded\n      document.body.appendChild(script);\n    };\n    const initializeGoogleSignIn = () => {\n      window.gapi.load('auth2', () => {\n        window.gapi.auth2.init({\n          client_id: '784196204527-gdj1ifiiac5164stndnsgh2mom2e0elu.apps.googleusercontent.com',\n          scope: 'profile email'\n        }).then(() => {\n          // Attach sign-in listener\n          window.gapi.signin2.render('google-signin-button', {\n            scope: 'profile email',\n            width: 240,\n            height: 50,\n            longtitle: true,\n            theme: 'dark',\n            onsuccess: onSignIn,\n            onfailure: () => {\n              toast.error('Google login failed. Please try again.');\n            }\n          });\n        });\n      });\n    };\n    loadGoogleScript();\n  }, []);\n\n  // Handle Google Sign-In success\n  const onSignIn = googleUser => {\n    const profile = googleUser.getBasicProfile();\n    console.log(\"ID: \" + profile.getId()); // Don't send this directly to your server!\n    console.log('Full Name: ' + profile.getName());\n    console.log('Given Name: ' + profile.getGivenName());\n    console.log('Family Name: ' + profile.getFamilyName());\n    console.log(\"Image URL: \" + profile.getImageUrl());\n    console.log(\"Email: \" + profile.getEmail());\n    const id_token = googleUser.getAuthResponse().id_token;\n    console.log(\"ID Token: \" + id_token);\n\n    // Send ID token to backend for verification\n    fetch('https://cp.dhytv.com/v1/auth/google', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        tokenId: id_token\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.success) {\n        login(data.accessToken, data.user.email);\n        toast.success('Google login successful! Redirecting...', {\n          onClose: () => navigate('/')\n        });\n      } else {\n        toast.error('Google login failed: ' + data.message);\n      }\n    }).catch(error => {\n      console.error('Error during Google login:', error);\n      toast.error('An error occurred during Google login. Please try again.');\n    });\n  };\n  const onSubmit = async data => {\n    // Existing login functionality\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-page\",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"artistic-word\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          defaultValue: ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.email) || '',\n          ...register('email', {\n            required: true\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          defaultValue: ((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.password) || '',\n          ...register('password', {\n            required: true\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"nav-button\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"google-signin-button\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Don't have a username? \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/register\",\n        children: \"Register here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"FaaTYPYDiJQLoKIAPg6puvFDHpk=\", false, function () {\n  return [useForm, useNavigate, useLocation];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useEffect","useContext","useForm","useLocation","useNavigate","Link","toast","ToastContainer","AuthContext","jsxDEV","_jsxDEV","LoginPage","_s","_location$state","_location$state2","register","handleSubmit","navigate","location","login","loadGoogleScript","script","document","createElement","src","async","defer","onload","initializeGoogleSignIn","body","appendChild","window","gapi","load","auth2","init","client_id","scope","then","signin2","render","width","height","longtitle","theme","onsuccess","onSignIn","onfailure","error","googleUser","profile","getBasicProfile","console","log","getId","getName","getGivenName","getFamilyName","getImageUrl","getEmail","id_token","getAuthResponse","fetch","method","headers","JSON","stringify","tokenId","res","json","data","success","accessToken","user","email","onClose","message","catch","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","defaultValue","state","required","password","id","to","_c","$RefreshReg$"],"sources":["/Users/sha/Desktop/CollectPie_frontend/collectpie_flask/src/components/LoginPage/LoginPage.js"],"sourcesContent":["import React, { useEffect, useContext } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useLocation, useNavigate, Link } from 'react-router-dom';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './LoginPage.css';\nimport { AuthContext } from '../../contexts/AuthContext'; // Import AuthContext\n\nconst LoginPage = () => {\n  const { register, handleSubmit } = useForm();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { login } = useContext(AuthContext); // Get login function from AuthContext\n\n  // Dynamically load the Google Platform script\n  useEffect(() => {\n    const loadGoogleScript = () => {\n      const script = document.createElement('script');\n      script.src = 'https://apis.google.com/js/platform.js';\n      script.async = true;\n      script.defer = true;\n      script.onload = initializeGoogleSignIn; // Initialize after script is loaded\n      document.body.appendChild(script);\n    };\n\n    const initializeGoogleSignIn = () => {\n      window.gapi.load('auth2', () => {\n        window.gapi.auth2.init({\n          client_id: '784196204527-gdj1ifiiac5164stndnsgh2mom2e0elu.apps.googleusercontent.com',\n          scope: 'profile email',\n        }).then(() => {\n          // Attach sign-in listener\n          window.gapi.signin2.render('google-signin-button', {\n            scope: 'profile email',\n            width: 240,\n            height: 50,\n            longtitle: true,\n            theme: 'dark',\n            onsuccess: onSignIn,\n            onfailure: () => {\n              toast.error('Google login failed. Please try again.');\n            },\n          });\n        });\n      });\n    };\n\n    loadGoogleScript();\n  }, []);\n\n  // Handle Google Sign-In success\n  const onSignIn = (googleUser) => {\n    const profile = googleUser.getBasicProfile();\n    console.log(\"ID: \" + profile.getId()); // Don't send this directly to your server!\n    console.log('Full Name: ' + profile.getName());\n    console.log('Given Name: ' + profile.getGivenName());\n    console.log('Family Name: ' + profile.getFamilyName());\n    console.log(\"Image URL: \" + profile.getImageUrl());\n    console.log(\"Email: \" + profile.getEmail());\n\n    const id_token = googleUser.getAuthResponse().id_token;\n    console.log(\"ID Token: \" + id_token);\n\n    // Send ID token to backend for verification\n    fetch('https://cp.dhytv.com/v1/auth/google', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ tokenId: id_token }),\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.success) {\n          login(data.accessToken, data.user.email);\n          toast.success('Google login successful! Redirecting...', {\n            onClose: () => navigate('/'),\n          });\n        } else {\n          toast.error('Google login failed: ' + data.message);\n        }\n      })\n      .catch(error => {\n        console.error('Error during Google login:', error);\n        toast.error('An error occurred during Google login. Please try again.');\n      });\n  };\n\n  const onSubmit = async (data) => {\n    // Existing login functionality\n  };\n\n  return (\n    <div className=\"login-page\">\n      <ToastContainer /> {/* Toast container for notifications */}\n      <h1 className=\"artistic-word\">Login</h1>\n\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <div>\n          <label>Email:</label>\n          <input\n            type=\"text\"\n            defaultValue={location.state?.email || ''}\n            {...register('email', { required: true })}\n          />\n        </div>\n        <div>\n          <label>Password:</label>\n          <input\n            type=\"password\"\n            defaultValue={location.state?.password || ''}\n            {...register('password', { required: true })}\n          />\n        </div>\n        <button type=\"submit\" className=\"nav-button\">Login</button>\n      </form>\n\n      {/* Google Login Button */}\n      <div id=\"google-signin-button\"></div> {/* Replace with Google Sign-In button */}\n\n      <p>Don't have a username? <Link to=\"/register\">Register here</Link></p>\n    </div>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}